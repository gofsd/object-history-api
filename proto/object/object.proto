syntax = "proto3";

package object;

option go_package = "object/proto";


option java_multiple_files = true;
option java_package = "obj";
option java_outer_classname = "Obj";
option objc_class_prefix = "OBJ";

// Object service definition
service ObjectService {
  rpc CreateObject(CreateObjectRequest) returns (ObjectResponse);
  rpc GetObject(GetObjectRequest) returns (ObjectResponse);
  rpc UpdateObject(UpdateObjectRequest) returns (ObjectResponse);
  rpc DeleteObject(DeleteObjectRequest) returns (ObjectResponse);
  rpc ListObjects(ListObjectsRequest) returns (ListObjectsResponse);
}

// Object structure
message Object {
  uint64 id = 1;
  uint64 owner_id = 2;
  uint64 version = 3;
  map<string, string> fields = 4;
}

// CRUD Requests
message CreateObjectRequest {
  uint64 owner_id = 1;
  map<string, string> fields = 2;
}

message GetObjectRequest {
  uint64 object_id = 1;
}

message UpdateObjectRequest {
  uint64 object_id = 1;
  uint64 owner_id = 1;
  map<string, string> fields = 2;
}

message DeleteObjectRequest {
  uint64 object_id = 1;
}

// Response with object details
message ObjectResponse {
  Object object = 1;
}

// Pagination support for listing objects
message ListObjectsRequest {
  uint64 owner_id = 1;
  uint32 page = 2;
  uint32 limit = 3;
  map<string, string> fields = 4;
}

message ListObjectsResponse {
  repeated Object objects = 1;
  uint32 total_count = 2;
}

